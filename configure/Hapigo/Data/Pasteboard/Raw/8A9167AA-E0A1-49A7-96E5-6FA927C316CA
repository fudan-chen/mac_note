[{"type":"org.chromium.source-url","data":"aHR0cHM6Ly9jbGF1ZGUuYWkvY2hhdC83NjQzMzhmOC1kZjA4LTQwODEtYTRmNy0xZGMwNWM3ODk5N2U="},{"type":"public.utf8-plain-text","data":"ZGVmIGNhbGN1bGF0ZV9maWRfZm9yX2dyb3VwKHNlbGYsIGdlbmVyYXRlZF9wYXRoczogTGlzdFtzdHJdLCBndF9wYXRoczogTGlzdFtzdHJdKSAtPiBmbG9hdDoKICAgICIiIgogICAgQ2FsY3VsYXRlIEZJRCBiZXR3ZWVuIHR3byBsaXN0cyBvZiBpbWFnZXMgdXNpbmcgcHl0b3JjaC1maWQuCiAgICBnZW5lcmF0ZWRfcGF0aHM6IGxpc3Qgb2YgZ2VuZXJhdGVkL2VkaXRlZCBpbWFnZSBwYXRocwogICAgZ3RfcGF0aHM6IGxpc3Qgb2YgZ3JvdW5kIHRydXRoL3RhcmdldCBpbWFnZSBwYXRocwogICAgIiIiCiAgICBpZiBub3QgRklEX0FWQUlMQUJMRToKICAgICAgICBsb2dnaW5nLndhcm5pbmcoInB5dG9yY2gtZmlkIG5vdCBhdmFpbGFibGUsIHJldHVybmluZyAwLjAiKQogICAgICAgIHJldHVybiAwLjAKICAgIAogICAgaWYgbm90IGdlbmVyYXRlZF9wYXRocyBvciBub3QgZ3RfcGF0aHM6CiAgICAgICAgbG9nZ2luZy53YXJuaW5nKCJFbXB0eSBpbWFnZSBwYXRoIGxpc3RzLCBjYW5ub3QgY2FsY3VsYXRlIEZJRCIpCiAgICAgICAgcmV0dXJuIDAuMAogICAgCiAgICB0cnk6CiAgICAgICAgaW1wb3J0IHRlbXBmaWxlCiAgICAgICAgaW1wb3J0IHNodXRpbAogICAgICAgIGZyb20gcHl0b3JjaF9maWQgaW1wb3J0IGZpZF9zY29yZQogICAgICAgIAogICAgICAgICMgQ3JlYXRlIHRlbXBvcmFyeSBkaXJlY3RvcmllcyBmb3IgZ2VuZXJhdGVkIGFuZCBHVCBpbWFnZXMKICAgICAgICB3aXRoIHRlbXBmaWxlLlRlbXBvcmFyeURpcmVjdG9yeSgpIGFzIHRlbXBfZGlyOgogICAgICAgICAgICBnZW5fZGlyID0gb3MucGF0aC5qb2luKHRlbXBfZGlyLCAnZ2VuZXJhdGVkJykKICAgICAgICAgICAgZ3RfZGlyID0gb3MucGF0aC5qb2luKHRlbXBfZGlyLCAnZ3JvdW5kX3RydXRoJykKICAgICAgICAgICAgb3MubWFrZWRpcnMoZ2VuX2RpciwgZXhpc3Rfb2s9VHJ1ZSkKICAgICAgICAgICAgb3MubWFrZWRpcnMoZ3RfZGlyLCBleGlzdF9vaz1UcnVlKQogICAgICAgICAgICAKICAgICAgICAgICAgIyBDb3B5IG9yIHN5bWxpbmsgaW1hZ2VzIHRvIHRlbXBvcmFyeSBkaXJlY3RvcmllcwogICAgICAgICAgICBsb2dnaW5nLmluZm8oZiJQcmVwYXJpbmcge2xlbihnZW5lcmF0ZWRfcGF0aHMpfSBnZW5lcmF0ZWQgaW1hZ2VzIGZvciBGSUQgY2FsY3VsYXRpb24uLi4iKQogICAgICAgICAgICBmb3IgaSwgaW1nX3BhdGggaW4gZW51bWVyYXRlKGdlbmVyYXRlZF9wYXRocyk6CiAgICAgICAgICAgICAgICBpZiBvcy5wYXRoLmV4aXN0cyhpbWdfcGF0aCk6CiAgICAgICAgICAgICAgICAgICAgZXh0ID0gb3MucGF0aC5zcGxpdGV4dChpbWdfcGF0aClbMV0KICAgICAgICAgICAgICAgICAgICBkZXN0ID0gb3MucGF0aC5qb2luKGdlbl9kaXIsIGYiaW1nX3tpOjA2ZH17ZXh0fSIpCiAgICAgICAgICAgICAgICAgICAgc2h1dGlsLmNvcHkyKGltZ19wYXRoLCBkZXN0KQogICAgICAgICAgICAKICAgICAgICAgICAgbG9nZ2luZy5pbmZvKGYiUHJlcGFyaW5nIHtsZW4oZ3RfcGF0aHMpfSBncm91bmQgdHJ1dGggaW1hZ2VzIGZvciBGSUQgY2FsY3VsYXRpb24uLi4iKQogICAgICAgICAgICBmb3IgaSwgaW1nX3BhdGggaW4gZW51bWVyYXRlKGd0X3BhdGhzKToKICAgICAgICAgICAgICAgIGlmIG9zLnBhdGguZXhpc3RzKGltZ19wYXRoKToKICAgICAgICAgICAgICAgICAgICBleHQgPSBvcy5wYXRoLnNwbGl0ZXh0KGltZ19wYXRoKVsxXQogICAgICAgICAgICAgICAgICAgIGRlc3QgPSBvcy5wYXRoLmpvaW4oZ3RfZGlyLCBmImltZ197aTowNmR9e2V4dH0iKQogICAgICAgICAgICAgICAgICAgIHNodXRpbC5jb3B5MihpbWdfcGF0aCwgZGVzdCkKICAgICAgICAgICAgCiAgICAgICAgICAgICMgQ2hlY2sgaWYgd2UgaGF2ZSBlbm91Z2ggaW1hZ2VzCiAgICAgICAgICAgIGdlbl9jb3VudCA9IGxlbihvcy5saXN0ZGlyKGdlbl9kaXIpKQogICAgICAgICAgICBndF9jb3VudCA9IGxlbihvcy5saXN0ZGlyKGd0X2RpcikpCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBnZW5fY291bnQgPT0gMCBvciBndF9jb3VudCA9PSAwOgogICAgICAgICAgICAgICAgbG9nZ2luZy53YXJuaW5nKGYiTm90IGVub3VnaCBpbWFnZXM6IHtnZW5fY291bnR9IGdlbmVyYXRlZCwge2d0X2NvdW50fSBHVCIpCiAgICAgICAgICAgICAgICByZXR1cm4gMC4wCiAgICAgICAgICAgIAogICAgICAgICAgICBsb2dnaW5nLmluZm8oZiJDb21wdXRpbmcgRklEIGJldHdlZW4ge2dlbl9jb3VudH0gZ2VuZXJhdGVkIGFuZCB7Z3RfY291bnR9IEdUIGltYWdlcy4uLiIpCiAgICAgICAgICAgIAogICAgICAgICAgICAjIENhbGN1bGF0ZSBGSUQgc2NvcmUKICAgICAgICAgICAgZmlkX3ZhbHVlID0gZmlkX3Njb3JlLmNhbGN1bGF0ZV9maWRfZ2l2ZW5fcGF0aHMoCiAgICAgICAgICAgICAgICBbZ2VuX2RpciwgZ3RfZGlyXSwKICAgICAgICAgICAgICAgIGJhdGNoX3NpemU9NTAsCiAgICAgICAgICAgICAgICBkZXZpY2U9c2VsZi5kZXZpY2UsCiAgICAgICAgICAgICAgICBkaW1zPTIwNDgsICAjIEluY2VwdGlvblYzIGZlYXR1cmUgZGltZW5zaW9uCiAgICAgICAgICAgICAgICBudW1fd29ya2Vycz0wICAjIFNldCB0byAwIHRvIGF2b2lkIG11bHRpcHJvY2Vzc2luZyBpc3N1ZXMKICAgICAgICAgICAgKQogICAgICAgICAgICAKICAgICAgICAgICAgbG9nZ2luZy5pbmZvKGYiRklEIGNhbGN1bGF0aW9uIGNvbXBsZXRlZDoge2ZpZF92YWx1ZTouNGZ9IikKICAgICAgICAgICAgcmV0dXJuIGZsb2F0KGZpZF92YWx1ZSkKICAgIAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGxvZ2dpbmcuZXJyb3IoZiJGSUQgY2FsY3VsYXRpb24gZmFpbGVkOiB7ZX0iKQogICAgICAgIGltcG9ydCB0cmFjZWJhY2sKICAgICAgICB0cmFjZWJhY2sucHJpbnRfZXhjKCkKICAgICAgICByZXR1cm4gMC4w"},{"type":"org.chromium.internal.source-rfh-token","data":"FAAAAFkDAADIOtR4IHJc5rR6PmvEFyK7"}]